# appbuilder.core package

## Subpackages

* [appbuilder.core.assistant package](appbuilder.core.assistant.md)
  * [Subpackages](appbuilder.core.assistant.md#subpackages)
    * [appbuilder.core.assistant.assistants package](appbuilder.core.assistant.assistants.md)
      * [Submodules](appbuilder.core.assistant.assistants.md#submodules)
      * [appbuilder.core.assistant.assistants.assistants module](appbuilder.core.assistant.assistants.md#module-appbuilder.core.assistant.assistants.assistants)
      * [appbuilder.core.assistant.assistants.files module](appbuilder.core.assistant.assistants.md#module-appbuilder.core.assistant.assistants.files)
      * [Module contents](appbuilder.core.assistant.assistants.md#module-appbuilder.core.assistant.assistants)
    * [appbuilder.core.assistant.threads package](appbuilder.core.assistant.threads.md)
      * [Subpackages](appbuilder.core.assistant.threads.md#subpackages)
      * [Submodules](appbuilder.core.assistant.threads.md#submodules)
      * [appbuilder.core.assistant.threads.threads module](appbuilder.core.assistant.threads.md#module-appbuilder.core.assistant.threads.threads)
      * [Module contents](appbuilder.core.assistant.threads.md#module-appbuilder.core.assistant.threads)
  * [Submodules](appbuilder.core.assistant.md#submodules)
  * [Module contents](appbuilder.core.assistant.md#module-appbuilder.core.assistant)
* [appbuilder.core.components package](appbuilder.core.components.md)
  * [Subpackages](appbuilder.core.components.md#subpackages)
    * [appbuilder.core.components.animal_recognize package](appbuilder.core.components.animal_recognize.md)
      * [Submodules](appbuilder.core.components.animal_recognize.md#submodules)
      * [appbuilder.core.components.animal_recognize.component module](appbuilder.core.components.animal_recognize.md#module-appbuilder.core.components.animal_recognize.component)
      * [Module contents](appbuilder.core.components.animal_recognize.md#module-appbuilder.core.components.animal_recognize)
    * [appbuilder.core.components.asr package](appbuilder.core.components.asr.md)
      * [Submodules](appbuilder.core.components.asr.md#submodules)
      * [appbuilder.core.components.asr.component module](appbuilder.core.components.asr.md#module-appbuilder.core.components.asr.component)
      * [Module contents](appbuilder.core.components.asr.md#module-appbuilder.core.components.asr)
    * [appbuilder.core.components.dish_recognize package](appbuilder.core.components.dish_recognize.md)
      * [Submodules](appbuilder.core.components.dish_recognize.md#submodules)
      * [appbuilder.core.components.dish_recognize.component module](appbuilder.core.components.dish_recognize.md#module-appbuilder.core.components.dish_recognize.component)
      * [Module contents](appbuilder.core.components.dish_recognize.md#module-appbuilder.core.components.dish_recognize)
    * [appbuilder.core.components.doc_crop_enhance package](appbuilder.core.components.doc_crop_enhance.md)
      * [Submodules](appbuilder.core.components.doc_crop_enhance.md#submodules)
      * [appbuilder.core.components.doc_crop_enhance.component module](appbuilder.core.components.doc_crop_enhance.md#module-appbuilder.core.components.doc_crop_enhance.component)
      * [Module contents](appbuilder.core.components.doc_crop_enhance.md#module-appbuilder.core.components.doc_crop_enhance)
    * [appbuilder.core.components.doc_format_converter package](appbuilder.core.components.doc_format_converter.md)
      * [Submodules](appbuilder.core.components.doc_format_converter.md#submodules)
      * [appbuilder.core.components.doc_format_converter.component module](appbuilder.core.components.doc_format_converter.md#module-appbuilder.core.components.doc_format_converter.component)
      * [Module contents](appbuilder.core.components.doc_format_converter.md#module-appbuilder.core.components.doc_format_converter)
    * [appbuilder.core.components.doc_parser package](appbuilder.core.components.doc_parser.md)
      * [Submodules](appbuilder.core.components.doc_parser.md#submodules)
      * [appbuilder.core.components.doc_parser.doc_parser module](appbuilder.core.components.doc_parser.md#module-appbuilder.core.components.doc_parser.doc_parser)
      * [Module contents](appbuilder.core.components.doc_parser.md#module-appbuilder.core.components.doc_parser)
    * [appbuilder.core.components.doc_splitter package](appbuilder.core.components.doc_splitter.md)
      * [Submodules](appbuilder.core.components.doc_splitter.md#submodules)
      * [appbuilder.core.components.doc_splitter.doc_splitter module](appbuilder.core.components.doc_splitter.md#module-appbuilder.core.components.doc_splitter.doc_splitter)
      * [Module contents](appbuilder.core.components.doc_splitter.md#module-appbuilder.core.components.doc_splitter)
    * [appbuilder.core.components.embeddings package](appbuilder.core.components.embeddings.md)
      * [Submodules](appbuilder.core.components.embeddings.md#submodules)
      * [appbuilder.core.components.embeddings.component module](appbuilder.core.components.embeddings.md#module-appbuilder.core.components.embeddings.component)
      * [Module contents](appbuilder.core.components.embeddings.md#module-appbuilder.core.components.embeddings)
    * [appbuilder.core.components.excel2figure package](appbuilder.core.components.excel2figure.md)
      * [Submodules](appbuilder.core.components.excel2figure.md#submodules)
      * [appbuilder.core.components.excel2figure.component module](appbuilder.core.components.excel2figure.md#module-appbuilder.core.components.excel2figure.component)
      * [Module contents](appbuilder.core.components.excel2figure.md#module-appbuilder.core.components.excel2figure)
    * [appbuilder.core.components.extract_table package](appbuilder.core.components.extract_table.md)
      * [Submodules](appbuilder.core.components.extract_table.md#submodules)
      * [appbuilder.core.components.extract_table.component module](appbuilder.core.components.extract_table.md#module-appbuilder.core.components.extract_table.component)
      * [Module contents](appbuilder.core.components.extract_table.md#module-appbuilder.core.components.extract_table)
    * [appbuilder.core.components.gbi package](appbuilder.core.components.gbi.md)
      * [Subpackages](appbuilder.core.components.gbi.md#subpackages)
      * [Submodules](appbuilder.core.components.gbi.md#submodules)
      * [appbuilder.core.components.gbi.basic module](appbuilder.core.components.gbi.md#module-appbuilder.core.components.gbi.basic)
      * [Module contents](appbuilder.core.components.gbi.md#module-appbuilder.core.components.gbi)
    * [appbuilder.core.components.general_ocr package](appbuilder.core.components.general_ocr.md)
      * [Submodules](appbuilder.core.components.general_ocr.md#submodules)
      * [appbuilder.core.components.general_ocr.component module](appbuilder.core.components.general_ocr.md#module-appbuilder.core.components.general_ocr.component)
      * [Module contents](appbuilder.core.components.general_ocr.md#module-appbuilder.core.components.general_ocr)
    * [appbuilder.core.components.handwrite_ocr package](appbuilder.core.components.handwrite_ocr.md)
      * [Submodules](appbuilder.core.components.handwrite_ocr.md#submodules)
      * [appbuilder.core.components.handwrite_ocr.component module](appbuilder.core.components.handwrite_ocr.md#module-appbuilder.core.components.handwrite_ocr.component)
      * [Module contents](appbuilder.core.components.handwrite_ocr.md#module-appbuilder.core.components.handwrite_ocr)
    * [appbuilder.core.components.image_understand package](appbuilder.core.components.image_understand.md)
      * [Submodules](appbuilder.core.components.image_understand.md#submodules)
      * [appbuilder.core.components.image_understand.component module](appbuilder.core.components.image_understand.md#module-appbuilder.core.components.image_understand.component)
      * [Module contents](appbuilder.core.components.image_understand.md#module-appbuilder.core.components.image_understand)
    * [appbuilder.core.components.landmark_recognize package](appbuilder.core.components.landmark_recognize.md)
      * [Submodules](appbuilder.core.components.landmark_recognize.md#submodules)
      * [appbuilder.core.components.landmark_recognize.component module](appbuilder.core.components.landmark_recognize.md#module-appbuilder.core.components.landmark_recognize.component)
      * [Module contents](appbuilder.core.components.landmark_recognize.md#module-appbuilder.core.components.landmark_recognize)
    * [appbuilder.core.components.llms package](appbuilder.core.components.llms.md)
      * [Subpackages](appbuilder.core.components.llms.md#subpackages)
      * [Submodules](appbuilder.core.components.llms.md#submodules)
      * [Module contents](appbuilder.core.components.llms.md#module-appbuilder.core.components.llms)
    * [appbuilder.core.components.matching package](appbuilder.core.components.matching.md)
      * [Submodules](appbuilder.core.components.matching.md#submodules)
      * [appbuilder.core.components.matching.component module](appbuilder.core.components.matching.md#module-appbuilder.core.components.matching.component)
      * [Module contents](appbuilder.core.components.matching.md#module-appbuilder.core.components.matching)
    * [appbuilder.core.components.mix_card_ocr package](appbuilder.core.components.mix_card_ocr.md)
      * [Submodules](appbuilder.core.components.mix_card_ocr.md#submodules)
      * [appbuilder.core.components.mix_card_ocr.component module](appbuilder.core.components.mix_card_ocr.md#module-appbuilder.core.components.mix_card_ocr.component)
      * [Module contents](appbuilder.core.components.mix_card_ocr.md#module-appbuilder.core.components.mix_card_ocr)
    * [appbuilder.core.components.object_recognize package](appbuilder.core.components.object_recognize.md)
      * [Submodules](appbuilder.core.components.object_recognize.md#submodules)
      * [appbuilder.core.components.object_recognize.component module](appbuilder.core.components.object_recognize.md#module-appbuilder.core.components.object_recognize.component)
      * [Module contents](appbuilder.core.components.object_recognize.md#module-appbuilder.core.components.object_recognize)
    * [appbuilder.core.components.plant_recognize package](appbuilder.core.components.plant_recognize.md)
      * [Submodules](appbuilder.core.components.plant_recognize.md#submodules)
      * [appbuilder.core.components.plant_recognize.component module](appbuilder.core.components.plant_recognize.md#module-appbuilder.core.components.plant_recognize.component)
      * [Module contents](appbuilder.core.components.plant_recognize.md#module-appbuilder.core.components.plant_recognize)
    * [appbuilder.core.components.ppt_generation_from_file package](appbuilder.core.components.ppt_generation_from_file.md)
      * [Submodules](appbuilder.core.components.ppt_generation_from_file.md#submodules)
      * [appbuilder.core.components.ppt_generation_from_file.component module](appbuilder.core.components.ppt_generation_from_file.md#module-appbuilder.core.components.ppt_generation_from_file.component)
      * [Module contents](appbuilder.core.components.ppt_generation_from_file.md#module-appbuilder.core.components.ppt_generation_from_file)
    * [appbuilder.core.components.ppt_generation_from_instruction package](appbuilder.core.components.ppt_generation_from_instruction.md)
      * [Submodules](appbuilder.core.components.ppt_generation_from_instruction.md#submodules)
      * [appbuilder.core.components.ppt_generation_from_instruction.component module](appbuilder.core.components.ppt_generation_from_instruction.md#module-appbuilder.core.components.ppt_generation_from_instruction.component)
      * [Module contents](appbuilder.core.components.ppt_generation_from_instruction.md#module-appbuilder.core.components.ppt_generation_from_instruction)
    * [appbuilder.core.components.ppt_generation_from_paper package](appbuilder.core.components.ppt_generation_from_paper.md)
      * [Submodules](appbuilder.core.components.ppt_generation_from_paper.md#submodules)
      * [appbuilder.core.components.ppt_generation_from_paper.component module](appbuilder.core.components.ppt_generation_from_paper.md#module-appbuilder.core.components.ppt_generation_from_paper.component)
      * [Module contents](appbuilder.core.components.ppt_generation_from_paper.md#module-appbuilder.core.components.ppt_generation_from_paper)
    * [appbuilder.core.components.qrcode_ocr package](appbuilder.core.components.qrcode_ocr.md)
      * [Submodules](appbuilder.core.components.qrcode_ocr.md#submodules)
      * [appbuilder.core.components.qrcode_ocr.component module](appbuilder.core.components.qrcode_ocr.md#module-appbuilder.core.components.qrcode_ocr.component)
      * [Module contents](appbuilder.core.components.qrcode_ocr.md#module-appbuilder.core.components.qrcode_ocr)
    * [appbuilder.core.components.rag_with_baidu_search package](appbuilder.core.components.rag_with_baidu_search.md)
      * [Submodules](appbuilder.core.components.rag_with_baidu_search.md#submodules)
      * [appbuilder.core.components.rag_with_baidu_search.component module](appbuilder.core.components.rag_with_baidu_search.md#module-appbuilder.core.components.rag_with_baidu_search.component)
      * [Module contents](appbuilder.core.components.rag_with_baidu_search.md#module-appbuilder.core.components.rag_with_baidu_search)
    * [appbuilder.core.components.rag_with_baidu_search_pro package](appbuilder.core.components.rag_with_baidu_search_pro.md)
      * [Submodules](appbuilder.core.components.rag_with_baidu_search_pro.md#submodules)
      * [appbuilder.core.components.rag_with_baidu_search_pro.component module](appbuilder.core.components.rag_with_baidu_search_pro.md#module-appbuilder.core.components.rag_with_baidu_search_pro.component)
      * [appbuilder.core.components.rag_with_baidu_search_pro.parse_rag_pro_response module](appbuilder.core.components.rag_with_baidu_search_pro.md#module-appbuilder.core.components.rag_with_baidu_search_pro.parse_rag_pro_response)
      * [Module contents](appbuilder.core.components.rag_with_baidu_search_pro.md#module-appbuilder.core.components.rag_with_baidu_search_pro)
    * [appbuilder.core.components.retriever package](appbuilder.core.components.retriever.md)
      * [Subpackages](appbuilder.core.components.retriever.md#subpackages)
      * [Module contents](appbuilder.core.components.retriever.md#module-appbuilder.core.components.retriever)
    * [appbuilder.core.components.table_ocr package](appbuilder.core.components.table_ocr.md)
      * [Submodules](appbuilder.core.components.table_ocr.md#submodules)
      * [appbuilder.core.components.table_ocr.component module](appbuilder.core.components.table_ocr.md#module-appbuilder.core.components.table_ocr.component)
      * [Module contents](appbuilder.core.components.table_ocr.md#module-appbuilder.core.components.table_ocr)
    * [appbuilder.core.components.text_to_image package](appbuilder.core.components.text_to_image.md)
      * [Submodules](appbuilder.core.components.text_to_image.md#submodules)
      * [appbuilder.core.components.text_to_image.component module](appbuilder.core.components.text_to_image.md#module-appbuilder.core.components.text_to_image.component)
      * [Module contents](appbuilder.core.components.text_to_image.md#module-appbuilder.core.components.text_to_image)
    * [appbuilder.core.components.translate package](appbuilder.core.components.translate.md)
      * [Submodules](appbuilder.core.components.translate.md#submodules)
      * [appbuilder.core.components.translate.component module](appbuilder.core.components.translate.md#module-appbuilder.core.components.translate.component)
      * [Module contents](appbuilder.core.components.translate.md#module-appbuilder.core.components.translate)
    * [appbuilder.core.components.tts package](appbuilder.core.components.tts.md)
      * [Submodules](appbuilder.core.components.tts.md#submodules)
      * [appbuilder.core.components.tts.component module](appbuilder.core.components.tts.md#module-appbuilder.core.components.tts.component)
      * [Module contents](appbuilder.core.components.tts.md#module-appbuilder.core.components.tts)
  * [Module contents](appbuilder.core.components.md#module-appbuilder.core.components)
* [appbuilder.core.console package](appbuilder.core.console.md)
  * [Subpackages](appbuilder.core.console.md#subpackages)
    * [appbuilder.core.console.appbuilder_client package](appbuilder.core.console.appbuilder_client.md)
      * [Submodules](appbuilder.core.console.appbuilder_client.md#submodules)
      * [appbuilder.core.console.appbuilder_client.appbuilder_client module](appbuilder.core.console.appbuilder_client.md#module-appbuilder.core.console.appbuilder_client.appbuilder_client)
      * [appbuilder.core.console.appbuilder_client.data_class module](appbuilder.core.console.appbuilder_client.md#module-appbuilder.core.console.appbuilder_client.event_handler)
      * [Module contents](appbuilder.core.console.appbuilder_client.md#module-appbuilder.core.console.appbuilder_client)
    * [appbuilder.core.console.dataset package](appbuilder.core.console.dataset.md)
      * [Submodules](appbuilder.core.console.dataset.md#submodules)
      * [appbuilder.core.console.dataset.dataset module](appbuilder.core.console.dataset.md#module-appbuilder.core.console.dataset.dataset)
      * [Module contents](appbuilder.core.console.dataset.md#module-appbuilder.core.console.dataset)
    * [`KnowledgeBase`](appbuilder.core.console.knowledge_base.md)
      * [`KnowledgeBase.add_document()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.add_document)
      * [`KnowledgeBase.create_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_chunk)
      * [`KnowledgeBase.create_documents()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_documents)
      * [`KnowledgeBase.create_knowledge()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_knowledge)
      * [`KnowledgeBase.create_knowledge_base()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_knowledge_base)
      * [`KnowledgeBase.delete_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.delete_chunk)
      * [`KnowledgeBase.delete_document()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.delete_document)
      * [`KnowledgeBase.delete_knowledge_base()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.delete_knowledge_base)
      * [`KnowledgeBase.describe_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.describe_chunk)
      * [`KnowledgeBase.describe_chunks()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.describe_chunks)
      * [`KnowledgeBase.get_all_documents()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_all_documents)
      * [`KnowledgeBase.get_documents_list()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_documents_list)
      * [`KnowledgeBase.get_knowledge_base_detail()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_knowledge_base_detail)
      * [`KnowledgeBase.get_knowledge_base_list()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_knowledge_base_list)
      * [`KnowledgeBase.modify_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.modify_chunk)
      * [`KnowledgeBase.modify_knowledge_base()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.modify_knowledge_base)
      * [`KnowledgeBase.upload_documents()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.upload_documents)
      * [`KnowledgeBase.upload_file()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.upload_file)
    * [Module contents](appbuilder.core.console.knowledge_base.md#module-appbuilder.core.console.knowledge_base)
    * [appbuilder.core.console.rag package](appbuilder.core.console.rag.md)
      * [Submodules](appbuilder.core.console.rag.md#submodules)
      * [appbuilder.core.console.rag.rag module](appbuilder.core.console.rag.md#module-appbuilder.core.console.rag.rag)
      * [Module contents](appbuilder.core.console.rag.md#module-appbuilder.core.console.rag)
  * [Submodules](appbuilder.core.console.md#submodules)
  * [Module contents](appbuilder.core.console.md#module-appbuilder.core.console)

## Submodules

## appbuilder.core.agent module

### *class* appbuilder.core.agent.AgentRuntime(\*, component: [Component](#appbuilder.core.component.Component), user_session_config: Any | str | None = None, user_session: Any | None = None)

基类：`BaseModel`

AgentRuntime 是对组件调用的服务化封装，开发者不是必须要用 AgentRuntime 才能运行自己的组件服务。
但 AgentRuntime 可以快速帮助开发者服务化组件服务，并且提供API、对话框等部署方式。
此外，结合 Component 和 Message 自带的运行和调试接口，可以方便开发者快速获得一个调试 Agent 的服务。

AgentRuntime 接受两个参数:
: component (Component): 可运行的 Component, 需要实现 run(message, stream, 
  <br/>
  ```
  **
  ```
  <br/>
  args) 方法
  user_session_config (sqlalchemy.engine.URL|str|None): Session 输出存储配置字符串。默认使用 sqlite:///user_session.db
  <br/>
  > 遵循 sqlalchemy 后端定义，参考文档：[https://docs.sqlalchemy.org/en/20/core/engines.html#backend-specific-urls](https://docs.sqlalchemy.org/en/20/core/engines.html#backend-specific-urls)

### 示例

```python
import os
import sys
import appbuilder
os.environ["APPBUILDER_TOKEN"] = '...'

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4"
)
agent = appbuilder.AgentRuntime(component=component)
message = appbuilder.Message({"query": "你好"})
print(agent.chat(message, stream=False))
```

```python
import os
import sys
import appbuilder
os.environ["APPBUILDER_TOKEN"] = '...'

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4"
)
user_session_config = "sqlite:///foo.db"
agent = appbuilder.AgentRuntime(
    component=component, user_session_config=user_session_config)
agent.serve(debug=False, port=8091)
```

```python
import os
import sys
import appbuilder
os.environ["APPBUILDER_TOKEN"] = '...'

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4"
)
agent = appbuilder.AgentRuntime(component=component)
agent.chainlit_demo(port=8091)
```

\*\* Session 数据管理 

```
**
```

: 除去上述简单应用外，还支持 Session 数据管理，下面是一个例子

### 示例

\*\* 请求时认证 

```
**
```

: component在创建时可以不进行认证，由AgentRuntime服务化后带入AppbuilderToken

### 示例

```python
import appbuilder

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4",
    lazy_certification=True, # 在创建时不进行认证
)
agent = appbuilder.AgentRuntime(component=component)
agent.serve(debug=False, port=8091)
```

\*\* Session 信息查看 

```
**
```

: 查看本地user_session.db数据库内部信息，下面是一个例子

### 示例

```python
import sqlite3
import json

# 连接到 SQLite 数据库
# 如果文件不存在，会自动在当前目录创建:
user_session_path = 'your_user_session.db地址'
conn = sqlite3.connect(user_session_path)
cursor = conn.cursor()

# 执行一条 SQL 语句，列出所有表
cursor.execute("SELECT name FROM sqlite_master WHERE type='table';")
print(cursor.fetchall())

# 查询appbuilder_session_messages表的列信息
cursor.execute("PRAGMA table_info(appbuilder_session_messages);")
columns_info = cursor.fetchall()

column_names = [info[1] for info in columns_info]  # info[1]是列名的位置
for column_name in column_names:
    print(column_name)

# 查询特定表中的数据
cursor.execute("SELECT message_value FROM appbuilder_session_messages;")
for row in cursor.fetchall():
    print(json.loads(row[0]))

# 关闭 Connection:
conn.close()
```

#### *class* Config

基类：`object`

检查配置

#### arbitrary_types_allowed *= True*

#### extra *= 'forbid'*

#### chainlit_agent(host='0.0.0.0', port=8091)

将 appbuilder client 服务化，提供 chainlit demo 页面

* **参数:**
  * **host** (*str*) – 服务 host
  * **port** (*int*) – 服务 port
* **返回:**
  None

#### chainlit_demo(host='0.0.0.0', port=8091)

将 component 服务化，提供 chainlit demo 页面

* **参数:**
  * **host** (*str*) – 服务 host
  * **port** (*int*) – 服务 port
* **返回:**
  None

#### chat(message: [Message](#appbuilder.core.message.Message), stream: bool = False, \*\*args) → [Message](#appbuilder.core.message.Message)

执行一次对话

* **参数:**
  * **message** ([*Message*](appbuilder.md#appbuilder.Message)) – 该次对话用户输入的 Message
  * **stream** (*bool*) – 是否流式请求
  * **\*\*args** – 其他参数，会被透传到 component
* **返回:**
  Message

#### component *: [Component](#appbuilder.core.component.Component)*

#### create_flask_app(url_rule='/chat')

创建 Flask 应用，主要用于 Gunicorn 这样的 WSGI 服务器来运行服务。

* **参数:**
  **None**
* **返回:**
  Flask

#### *classmethod* init(values: Dict) → Dict

初始化 AgentRuntime，UserSession 会在这里被初始化

* **参数:**
  **values** (*Dict*) – 初始化参数
* **返回:**
  None

#### model_computed_fields *: ClassVar[dict[str, ComputedFieldInfo]]* *= {}*

A dictionary of computed field names and their corresponding ComputedFieldInfo objects.

#### model_config *: ClassVar[ConfigDict]* *= {'arbitrary_types_allowed': True, 'extra': 'forbid'}*

Configuration for the model, should be a dictionary conforming to [ConfigDict][pydantic.config.ConfigDict].

#### model_fields *: ClassVar[dict[str, FieldInfo]]* *= {'component': FieldInfo(annotation=Component, required=True), 'user_session': FieldInfo(annotation=Union[Any, NoneType], required=False), 'user_session_config': FieldInfo(annotation=Union[Any, str, NoneType], required=False)}*

Metadata about the fields defined on the model,
mapping of field names to [FieldInfo][pydantic.fields.FieldInfo].

This replaces Model._\_fields_\_ from Pydantic V1.

#### prepare_chainlit_readme()

#### serve(host='0.0.0.0', debug=True, port=8092, url_rule='/chat')

将 component 服务化，提供 Flask http API 接口

* **参数:**
  * **host** (*str*) – 服务 host
  * **debug** (*bool*) – 是否是 debug 模式
  * **port** (*int*) – 服务 port
* **返回:**
  None

#### user_session *: Any | None*

#### user_session_config *: Any | str | None*

## appbuilder.core.component module

Component模块包括组件基类，用户自定义组件需要继承Component类，并至少实现run方法

### *class* appbuilder.core.component.Component(meta: [ComponentArguments](#appbuilder.core.component.ComponentArguments) | None = ComponentArguments(name='', tool_desc={}), secret_key: str | None = None, gateway: str = '', lazy_certification: bool = False)

基类：`object`

Component基类, 其它实现的Component子类需要继承该基类，并至少实现run方法.

#### *async* abatch(\*args, \*\*kwargs) → List[[Message](#appbuilder.core.message.Message)]

pass

#### *async* arun(\*args, \*\*kwargs) → [Message](#appbuilder.core.message.Message) | None

pass

#### batch(\*args, \*\*kwargs) → List[[Message](#appbuilder.core.message.Message)]

pass

#### create_langchain_tool(tool_name='', \*\*kwargs)

#### *property* http_client

#### manifests *= []*

#### run(\*inputs, \*\*kwargs)

Defines the computation performed at every call.
Should be overridden by all subclasses.

* **参数:**
  * **\*inputs** (*tuple*) – unpacked tuple arguments
  * **\*\*kwargs** (*dict*) – unpacked dict arguments

#### set_secret_key_and_gateway(secret_key: str | None = None, gateway: str = '')

#### tool_desc() → List[str]

#### tool_eval(\*\*kwargs)

#### tool_name() → List[str]

### *class* appbuilder.core.component.ComponentArguments(\*, name: str = '', tool_desc: Dict[str, Any] = {})

基类：`BaseModel`

“ComponentArguments define Component meta fields

#### extract_values_to_dict()

extract ComponentArguments fields to dict

#### model_computed_fields *: ClassVar[dict[str, ComputedFieldInfo]]* *= {}*

A dictionary of computed field names and their corresponding ComputedFieldInfo objects.

#### model_config *: ClassVar[ConfigDict]* *= {}*

Configuration for the model, should be a dictionary conforming to [ConfigDict][pydantic.config.ConfigDict].

#### model_fields *: ClassVar[dict[str, FieldInfo]]* *= {'name': FieldInfo(annotation=str, required=False, default=''), 'tool_desc': FieldInfo(annotation=Dict[str, Any], required=False, default={})}*

Metadata about the fields defined on the model,
mapping of field names to [FieldInfo][pydantic.fields.FieldInfo].

This replaces Model._\_fields_\_ from Pydantic V1.

#### name *: str*

#### tool_desc *: Dict[str, Any]*

## appbuilder.core.constants module

## appbuilder.core.context module

### *class* appbuilder.core.context.SessionContext(id: str, session_id: str, request_id: str, user_id: str | None = None)

基类：`object`

维护当前 Session 的上下文信息。

#### id *: str*

#### request_id *: str*

#### session_id *: str*

#### session_vars_dict *: dict*

#### user_id *: str | None*

### appbuilder.core.context.get_context() → [SessionContext](#appbuilder.core.context.SessionContext)

获取当前 Session 的上下文信息。

### appbuilder.core.context.init_context(session_id: str, request_id: str, user_id: str | None = None) → [SessionContext](#appbuilder.core.context.SessionContext)

初始化 Session 的上下文信息。

## appbuilder.core.functional module

## appbuilder.core.message module

### *class* appbuilder.core.message.Message(content: \_T | None = None, \*, name: str | None = 'msg', mtype: str | None = 'dict', id: str | None = 'fb5d0e80-64cd-4a7e-a5a8-82b268cc0f68', \*\*data)

基类：`BaseModel`, `Generic`[`_T`]

#### content *: \_T | None*

#### id *: str | None*

#### model_computed_fields *: ClassVar[dict[str, ComputedFieldInfo]]* *= {}*

A dictionary of computed field names and their corresponding ComputedFieldInfo objects.

#### model_config *: ClassVar[ConfigDict]* *= {'extra': 'allow'}*

Configuration for the model, should be a dictionary conforming to [ConfigDict][pydantic.config.ConfigDict].

#### model_fields *: ClassVar[dict[str, FieldInfo]]* *= {'content': FieldInfo(annotation=Union[TypeVar, NoneType], required=False, default={}), 'id': FieldInfo(annotation=Union[str, NoneType], required=False, default='fb5d0e80-64cd-4a7e-a5a8-82b268cc0f68'), 'mtype': FieldInfo(annotation=Union[str, NoneType], required=False, default='dict'), 'name': FieldInfo(annotation=Union[str, NoneType], required=False, default='msg')}*

Metadata about the fields defined on the model,
mapping of field names to [FieldInfo][pydantic.fields.FieldInfo].

This replaces Model._\_fields_\_ from Pydantic V1.

#### mtype *: str | None*

#### name *: str | None*

## appbuilder.core.session_message module

## appbuilder.core.user_session module

### *class* appbuilder.core.user_session.UserSession(\*args, \*\*kwargs)

基类：`object`

会话数据管理工具，实例化后将是一个全局变量。
提供保存对话数据与获取历史数据的方法，

```
**
```

必须\*\*在 AgentRuntime 启动的服务中使用。

#### append(message_dict: Dict[str, [Message](#appbuilder.core.message.Message)]) → None

将 message_dict 中的变量保存到 session 中。
在非服务化版本中使用内存存储。在服务化版本中，将使用数据库进行存储。

* **参数:**
  **message_dict** (*Dict* *[**str* *,* [*Message*](appbuilder.md#appbuilder.Message) *]*) – 包含 Message 的字典，其中键为字符串类型，值为 Message 类型。
* **返回:**
  None

#### get_history(key: str, limit: int = 10) → List[[Message](#appbuilder.core.message.Message)]

获取同个 session 中名为 key 的历史变量。
在非服务化版本中从内存获取。在服务化版本中，将从数据库获取。

* **参数:**
  * **key** (*str*) – 变量名
  * **limit** (*int*) – 最近 limit 条 Message 数据
* **返回:**
  List[Message]

### appbuilder.core.user_session.lazy_import_sqlalchemy()

## Module contents
