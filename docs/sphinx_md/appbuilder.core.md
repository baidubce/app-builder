# appbuilder.core package

## Subpackages

* [appbuilder.core.assistant package](appbuilder.core.assistant.md)
  * [Subpackages](appbuilder.core.assistant.md#subpackages)
    * [appbuilder.core.assistant.assistants package](appbuilder.core.assistant.assistants.md)
      * [Submodules](appbuilder.core.assistant.assistants.md#submodules)
      * [appbuilder.core.assistant.assistants.assistants module](appbuilder.core.assistant.assistants.md#module-appbuilder.core.assistant.assistants.assistants)
      * [appbuilder.core.assistant.assistants.files module](appbuilder.core.assistant.assistants.md#module-appbuilder.core.assistant.assistants.files)
    * [appbuilder.core.assistant.threads package](appbuilder.core.assistant.threads.md)
      * [Subpackages](appbuilder.core.assistant.threads.md#subpackages)
      * [Submodules](appbuilder.core.assistant.threads.md#submodules)
      * [appbuilder.core.assistant.threads.threads module](appbuilder.core.assistant.threads.md#module-appbuilder.core.assistant.threads.threads)
  * [Submodules](appbuilder.core.assistant.md#submodules)
* [appbuilder.core.components package](appbuilder.core.components.md)
  * [Subpackages](appbuilder.core.components.md#subpackages)
    * [appbuilder.core.components.animal_recognize package](appbuilder.core.components.animal_recognize.md)
      * [Submodules](appbuilder.core.components.animal_recognize.md#submodules)
      * [appbuilder.core.components.animal_recognize.component module](appbuilder.core.components.animal_recognize.md#module-appbuilder.core.components.animal_recognize.component)
    * [appbuilder.core.components.asr package](appbuilder.core.components.asr.md)
      * [Submodules](appbuilder.core.components.asr.md#submodules)
      * [appbuilder.core.components.asr.component module](appbuilder.core.components.asr.md#module-appbuilder.core.components.asr.component)
    * [appbuilder.core.components.dish_recognize package](appbuilder.core.components.dish_recognize.md)
      * [Submodules](appbuilder.core.components.dish_recognize.md#submodules)
      * [appbuilder.core.components.dish_recognize.component module](appbuilder.core.components.dish_recognize.md#module-appbuilder.core.components.dish_recognize.component)
    * [appbuilder.core.components.doc_crop_enhance package](appbuilder.core.components.doc_crop_enhance.md)
      * [Submodules](appbuilder.core.components.doc_crop_enhance.md#submodules)
      * [appbuilder.core.components.doc_crop_enhance.component module](appbuilder.core.components.doc_crop_enhance.md#module-appbuilder.core.components.doc_crop_enhance.component)
    * [appbuilder.core.components.doc_format_converter package](appbuilder.core.components.doc_format_converter.md)
      * [Submodules](appbuilder.core.components.doc_format_converter.md#submodules)
      * [appbuilder.core.components.doc_format_converter.component module](appbuilder.core.components.doc_format_converter.md#module-appbuilder.core.components.doc_format_converter.component)
    * [appbuilder.core.components.doc_parser package](appbuilder.core.components.doc_parser.md)
      * [Submodules](appbuilder.core.components.doc_parser.md#submodules)
      * [appbuilder.core.components.doc_parser.doc_parser module](appbuilder.core.components.doc_parser.md#module-appbuilder.core.components.doc_parser.doc_parser)
    * [appbuilder.core.components.doc_splitter package](appbuilder.core.components.doc_splitter.md)
      * [Submodules](appbuilder.core.components.doc_splitter.md#submodules)
      * [appbuilder.core.components.doc_splitter.doc_splitter module](appbuilder.core.components.doc_splitter.md#module-appbuilder.core.components.doc_splitter.doc_splitter)
    * [appbuilder.core.components.embeddings package](appbuilder.core.components.embeddings.md)
      * [Submodules](appbuilder.core.components.embeddings.md#submodules)
      * [appbuilder.core.components.embeddings.component module](appbuilder.core.components.embeddings.md#module-appbuilder.core.components.embeddings.component)
    * [appbuilder.core.components.excel2figure package](appbuilder.core.components.excel2figure.md)
      * [Submodules](appbuilder.core.components.excel2figure.md#submodules)
      * [appbuilder.core.components.excel2figure.component module](appbuilder.core.components.excel2figure.md#module-appbuilder.core.components.excel2figure.component)
    * [appbuilder.core.components.extract_table package](appbuilder.core.components.extract_table.md)
      * [Submodules](appbuilder.core.components.extract_table.md#submodules)
      * [appbuilder.core.components.extract_table.component module](appbuilder.core.components.extract_table.md#module-appbuilder.core.components.extract_table.component)
    * [appbuilder.core.components.gbi package](appbuilder.core.components.gbi.md)
      * [Subpackages](appbuilder.core.components.gbi.md#subpackages)
      * [Submodules](appbuilder.core.components.gbi.md#submodules)
      * [appbuilder.core.components.gbi.basic module](appbuilder.core.components.gbi.md#module-appbuilder.core.components.gbi.basic)
    * [appbuilder.core.components.general_ocr package](appbuilder.core.components.general_ocr.md)
      * [Submodules](appbuilder.core.components.general_ocr.md#submodules)
      * [appbuilder.core.components.general_ocr.component module](appbuilder.core.components.general_ocr.md#module-appbuilder.core.components.general_ocr.component)
    * [appbuilder.core.components.handwrite_ocr package](appbuilder.core.components.handwrite_ocr.md)
      * [Submodules](appbuilder.core.components.handwrite_ocr.md#submodules)
      * [appbuilder.core.components.handwrite_ocr.component module](appbuilder.core.components.handwrite_ocr.md#module-appbuilder.core.components.handwrite_ocr.component)
    * [appbuilder.core.components.image_understand package](appbuilder.core.components.image_understand.md)
      * [Submodules](appbuilder.core.components.image_understand.md#submodules)
      * [appbuilder.core.components.image_understand.component module](appbuilder.core.components.image_understand.md#module-appbuilder.core.components.image_understand.component)
    * [appbuilder.core.components.landmark_recognize package](appbuilder.core.components.landmark_recognize.md)
      * [Submodules](appbuilder.core.components.landmark_recognize.md#submodules)
      * [appbuilder.core.components.landmark_recognize.component module](appbuilder.core.components.landmark_recognize.md#module-appbuilder.core.components.landmark_recognize.component)
    * [appbuilder.core.components.llms package](appbuilder.core.components.llms.md)
      * [Subpackages](appbuilder.core.components.llms.md#subpackages)
      * [Submodules](appbuilder.core.components.llms.md#submodules)
    * [appbuilder.core.components.matching package](appbuilder.core.components.matching.md)
      * [Submodules](appbuilder.core.components.matching.md#submodules)
      * [appbuilder.core.components.matching.component module](appbuilder.core.components.matching.md#module-appbuilder.core.components.matching.component)
    * [appbuilder.core.components.mix_card_ocr package](appbuilder.core.components.mix_card_ocr.md)
      * [Submodules](appbuilder.core.components.mix_card_ocr.md#submodules)
      * [appbuilder.core.components.mix_card_ocr.component module](appbuilder.core.components.mix_card_ocr.md#module-appbuilder.core.components.mix_card_ocr.component)
    * [appbuilder.core.components.object_recognize package](appbuilder.core.components.object_recognize.md)
      * [Submodules](appbuilder.core.components.object_recognize.md#submodules)
      * [appbuilder.core.components.object_recognize.component module](appbuilder.core.components.object_recognize.md#module-appbuilder.core.components.object_recognize.component)
    * [appbuilder.core.components.plant_recognize package](appbuilder.core.components.plant_recognize.md)
      * [Submodules](appbuilder.core.components.plant_recognize.md#submodules)
      * [appbuilder.core.components.plant_recognize.component module](appbuilder.core.components.plant_recognize.md#module-appbuilder.core.components.plant_recognize.component)
    * [appbuilder.core.components.ppt_generation_from_file package](appbuilder.core.components.ppt_generation_from_file.md)
      * [Submodules](appbuilder.core.components.ppt_generation_from_file.md#submodules)
      * [appbuilder.core.components.ppt_generation_from_file.component module](appbuilder.core.components.ppt_generation_from_file.md#module-appbuilder.core.components.ppt_generation_from_file.component)
    * [appbuilder.core.components.ppt_generation_from_instruction package](appbuilder.core.components.ppt_generation_from_instruction.md)
      * [Submodules](appbuilder.core.components.ppt_generation_from_instruction.md#submodules)
      * [appbuilder.core.components.ppt_generation_from_instruction.component module](appbuilder.core.components.ppt_generation_from_instruction.md#module-appbuilder.core.components.ppt_generation_from_instruction.component)
    * [appbuilder.core.components.ppt_generation_from_paper package](appbuilder.core.components.ppt_generation_from_paper.md)
      * [Submodules](appbuilder.core.components.ppt_generation_from_paper.md#submodules)
      * [appbuilder.core.components.ppt_generation_from_paper.component module](appbuilder.core.components.ppt_generation_from_paper.md#module-appbuilder.core.components.ppt_generation_from_paper.component)
    * [appbuilder.core.components.qrcode_ocr package](appbuilder.core.components.qrcode_ocr.md)
      * [Submodules](appbuilder.core.components.qrcode_ocr.md#submodules)
      * [appbuilder.core.components.qrcode_ocr.component module](appbuilder.core.components.qrcode_ocr.md#module-appbuilder.core.components.qrcode_ocr.component)
    * [appbuilder.core.components.rag_with_baidu_search package](appbuilder.core.components.rag_with_baidu_search.md)
      * [Submodules](appbuilder.core.components.rag_with_baidu_search.md#submodules)
      * [appbuilder.core.components.rag_with_baidu_search.component module](appbuilder.core.components.rag_with_baidu_search.md#module-appbuilder.core.components.rag_with_baidu_search.component)
    * [appbuilder.core.components.rag_with_baidu_search_pro package](appbuilder.core.components.rag_with_baidu_search_pro.md)
      * [Submodules](appbuilder.core.components.rag_with_baidu_search_pro.md#submodules)
      * [appbuilder.core.components.rag_with_baidu_search_pro.component module](appbuilder.core.components.rag_with_baidu_search_pro.md#module-appbuilder.core.components.rag_with_baidu_search_pro.component)
      * [appbuilder.core.components.rag_with_baidu_search_pro.parse_rag_pro_response module](appbuilder.core.components.rag_with_baidu_search_pro.md#module-appbuilder.core.components.rag_with_baidu_search_pro.parse_rag_pro_response)
    * [appbuilder.core.components.retriever package](appbuilder.core.components.retriever.md)
      * [Subpackages](appbuilder.core.components.retriever.md#subpackages)
    * [appbuilder.core.components.table_ocr package](appbuilder.core.components.table_ocr.md)
      * [Submodules](appbuilder.core.components.table_ocr.md#submodules)
      * [appbuilder.core.components.table_ocr.component module](appbuilder.core.components.table_ocr.md#module-appbuilder.core.components.table_ocr.component)
    * [appbuilder.core.components.text_to_image package](appbuilder.core.components.text_to_image.md)
      * [Submodules](appbuilder.core.components.text_to_image.md#submodules)
      * [appbuilder.core.components.text_to_image.component module](appbuilder.core.components.text_to_image.md#module-appbuilder.core.components.text_to_image.component)
    * [appbuilder.core.components.translate package](appbuilder.core.components.translate.md)
      * [Submodules](appbuilder.core.components.translate.md#submodules)
      * [appbuilder.core.components.translate.component module](appbuilder.core.components.translate.md#module-appbuilder.core.components.translate.component)
    * [appbuilder.core.components.tts package](appbuilder.core.components.tts.md)
      * [Submodules](appbuilder.core.components.tts.md#submodules)
      * [appbuilder.core.components.tts.component module](appbuilder.core.components.tts.md#module-appbuilder.core.components.tts.component)
* [appbuilder.core.console package](appbuilder.core.console.md)
  * [Subpackages](appbuilder.core.console.md#subpackages)
    * [appbuilder.core.console.appbuilder_client package](appbuilder.core.console.appbuilder_client.md)
      * [Submodules](appbuilder.core.console.appbuilder_client.md#submodules)
      * [appbuilder.core.console.appbuilder_client.appbuilder_client module](appbuilder.core.console.appbuilder_client.md#module-appbuilder.core.console.appbuilder_client.appbuilder_client)
      * [appbuilder.core.console.appbuilder_client.data_class module](appbuilder.core.console.appbuilder_client.md#module-appbuilder.core.console.appbuilder_client.event_handler)
    * [appbuilder.core.console.dataset package](appbuilder.core.console.dataset.md)
      * [Submodules](appbuilder.core.console.dataset.md#submodules)
      * [appbuilder.core.console.dataset.dataset module](appbuilder.core.console.dataset.md#module-appbuilder.core.console.dataset.dataset)
    * [`KnowledgeBase`](appbuilder.core.console.knowledge_base.md)
      * [`KnowledgeBase.add_document()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.add_document)
      * [`KnowledgeBase.create_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_chunk)
      * [`KnowledgeBase.create_documents()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_documents)
      * [`KnowledgeBase.create_knowledge()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_knowledge)
      * [`KnowledgeBase.create_knowledge_base()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.create_knowledge_base)
      * [`KnowledgeBase.delete_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.delete_chunk)
      * [`KnowledgeBase.delete_document()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.delete_document)
      * [`KnowledgeBase.delete_knowledge_base()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.delete_knowledge_base)
      * [`KnowledgeBase.describe_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.describe_chunk)
      * [`KnowledgeBase.describe_chunks()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.describe_chunks)
      * [`KnowledgeBase.get_all_documents()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_all_documents)
      * [`KnowledgeBase.get_documents_list()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_documents_list)
      * [`KnowledgeBase.get_knowledge_base_detail()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_knowledge_base_detail)
      * [`KnowledgeBase.get_knowledge_base_list()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.get_knowledge_base_list)
      * [`KnowledgeBase.modify_chunk()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.modify_chunk)
      * [`KnowledgeBase.modify_knowledge_base()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.modify_knowledge_base)
      * [`KnowledgeBase.upload_documents()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.upload_documents)
      * [`KnowledgeBase.upload_file()`](appbuilder.core.console.knowledge_base.md#appbuilder.core.console.knowledge_base.knowledge_base.KnowledgeBase.upload_file)
    * [appbuilder.core.console.rag package](appbuilder.core.console.rag.md)
      * [Submodules](appbuilder.core.console.rag.md#submodules)
      * [appbuilder.core.console.rag.rag module](appbuilder.core.console.rag.md#module-appbuilder.core.console.rag.rag)
  * [Submodules](appbuilder.core.console.md#submodules)

## Submodules

## appbuilder.core.agent module

### *class* appbuilder.core.agent.AgentRuntime(\*, component: [Component](#appbuilder.core.component.Component), user_session_config: Any | str | None = None, user_session: Any | None = None)

基类：`BaseModel`

AgentRuntime 是对组件调用的服务化封装，开发者不是必须要用 AgentRuntime 才能运行自己的组件服务。
但 AgentRuntime 可以快速帮助开发者服务化组件服务，并且提供API、对话框等部署方式。
此外，结合 Component 和 Message 自带的运行和调试接口，可以方便开发者快速获得一个调试 Agent 的服务。

AgentRuntime 接受两个参数:
: component (Component): 可运行的 Component, 需要实现 run(message, stream, 
  <br/>
  ```
  **
  ```
  <br/>
  args) 方法
  user_session_config (sqlalchemy.engine.URL|str|None): Session 输出存储配置字符串。默认使用 sqlite:///user_session.db
  <br/>
  > 遵循 sqlalchemy 后端定义，参考文档：[https://docs.sqlalchemy.org/en/20/core/engines.html#backend-specific-urls](https://docs.sqlalchemy.org/en/20/core/engines.html#backend-specific-urls)

### 示例

```python
import os
import sys
import appbuilder
os.environ["APPBUILDER_TOKEN"] = '...'

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4"
)
agent = appbuilder.AgentRuntime(component=component)
message = appbuilder.Message({"query": "你好"})
print(agent.chat(message, stream=False))
```

```python
import os
import sys
import appbuilder
os.environ["APPBUILDER_TOKEN"] = '...'

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4"
)
user_session_config = "sqlite:///foo.db"
agent = appbuilder.AgentRuntime(
    component=component, user_session_config=user_session_config)
agent.serve(debug=False, port=8091)
```

```python
import os
import sys
import appbuilder
os.environ["APPBUILDER_TOKEN"] = '...'

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4"
)
agent = appbuilder.AgentRuntime(component=component)
agent.chainlit_demo(port=8091)
```

\*\* Session 数据管理 

```
**
```

: 除去上述简单应用外，还支持 Session 数据管理，下面是一个例子

### 示例

\*\* 请求时认证 

```
**
```

: component在创建时可以不进行认证，由AgentRuntime服务化后带入AppbuilderToken

### 示例

```python
import appbuilder

component = appbuilder.Playground(
    prompt_template="{query}",
    model="eb-4",
    lazy_certification=True, # 在创建时不进行认证
)
agent = appbuilder.AgentRuntime(component=component)
agent.serve(debug=False, port=8091)
```

\*\* Session 信息查看 

```
**
```

: 查看本地user_session.db数据库内部信息，下面是一个例子

### 示例

```python
import sqlite3
import json

# 连接到 SQLite 数据库
# 如果文件不存在，会自动在当前目录创建:
user_session_path = 'your_user_session.db地址'
conn = sqlite3.connect(user_session_path)
cursor = conn.cursor()

# 执行一条 SQL 语句，列出所有表
cursor.execute("SELECT name FROM sqlite_master WHERE type='table';")
print(cursor.fetchall())

# 查询appbuilder_session_messages表的列信息
cursor.execute("PRAGMA table_info(appbuilder_session_messages);")
columns_info = cursor.fetchall()

column_names = [info[1] for info in columns_info]  # info[1]是列名的位置
for column_name in column_names:
    print(column_name)

# 查询特定表中的数据
cursor.execute("SELECT message_value FROM appbuilder_session_messages;")
for row in cursor.fetchall():
    print(json.loads(row[0]))

# 关闭 Connection:
conn.close()
```

#### *class* Config

基类：`object`

检查配置

#### arbitrary_types_allowed *= True*

#### extra *= 'forbid'*

#### chainlit_agent(host='0.0.0.0', port=8091)

将 appbuilder client 服务化，提供 chainlit demo 页面

* **参数:**
  * **host** (*str*) – 服务 host
  * **port** (*int*) – 服务 port
* **返回:**
  None

#### chainlit_demo(host='0.0.0.0', port=8091)

将 component 服务化，提供 chainlit demo 页面

* **参数:**
  * **host** (*str*) – 服务 host
  * **port** (*int*) – 服务 port
* **返回:**
  None

#### chat(message: [Message](#appbuilder.core.message.Message), stream: bool = False, \*\*args) → [Message](#appbuilder.core.message.Message)

执行一次对话

* **参数:**
  * **message** ([*Message*](#appbuilder.core.message.Message)) – 该次对话用户输入的 Message
  * **stream** (*bool*) – 是否流式请求
  * **\*\*args** – 其他参数，会被透传到 component
* **返回:**
  Message

#### component *: [Component](#appbuilder.core.component.Component)*

#### create_flask_app(url_rule='/chat')

创建 Flask 应用，主要用于 Gunicorn 这样的 WSGI 服务器来运行服务。

* **参数:**
  **None**
* **返回:**
  Flask

#### *classmethod* init(values: Dict) → Dict

初始化 AgentRuntime，UserSession 会在这里被初始化

* **参数:**
  **values** (*Dict*) – 初始化参数
* **返回:**
  None

#### model_computed_fields *: ClassVar[dict[str, ComputedFieldInfo]]* *= {}*

A dictionary of computed field names and their corresponding ComputedFieldInfo objects.

#### model_config *: ClassVar[ConfigDict]* *= {'arbitrary_types_allowed': True, 'extra': 'forbid'}*

Configuration for the model, should be a dictionary conforming to [ConfigDict][pydantic.config.ConfigDict].

#### model_fields *: ClassVar[dict[str, FieldInfo]]* *= {'component': FieldInfo(annotation=Component, required=True), 'user_session': FieldInfo(annotation=Union[Any, NoneType], required=False), 'user_session_config': FieldInfo(annotation=Union[Any, str, NoneType], required=False)}*

Metadata about the fields defined on the model,
mapping of field names to [FieldInfo][pydantic.fields.FieldInfo].

This replaces Model._\_fields_\_ from Pydantic V1.

#### prepare_chainlit_readme()

#### serve(host='0.0.0.0', debug=True, port=8092, url_rule='/chat')

将 component 服务化，提供 Flask http API 接口

* **参数:**
  * **host** (*str*) – 服务 host
  * **debug** (*bool*) – 是否是 debug 模式
  * **port** (*int*) – 服务 port
* **返回:**
  None

#### user_session *: Any | None*

#### user_session_config *: Any | str | None*

## appbuilder.core.component module

Component模块包括组件基类，用户自定义组件需要继承Component类，并至少实现run方法

### *class* appbuilder.core.component.Component(meta: [ComponentArguments](#appbuilder.core.component.ComponentArguments) | None = ComponentArguments(name='', tool_desc={}), secret_key: str | None = None, gateway: str = '', lazy_certification: bool = False)

基类：`object`

Component基类, 其它实现的Component子类需要继承该基类，并至少实现run方法.

#### *async* abatch(\*args, \*\*kwargs) → List[[Message](#appbuilder.core.message.Message)]

pass

#### *async* arun(\*args, \*\*kwargs) → [Message](#appbuilder.core.message.Message) | None

pass

#### batch(\*args, \*\*kwargs) → List[[Message](#appbuilder.core.message.Message)]

pass

#### create_langchain_tool(tool_name='', \*\*kwargs)

#### *property* http_client

#### manifests *= []*

#### run(\*inputs, \*\*kwargs)

Defines the computation performed at every call.
Should be overridden by all subclasses.

* **参数:**
  * **\*inputs** (*tuple*) – unpacked tuple arguments
  * **\*\*kwargs** (*dict*) – unpacked dict arguments

#### set_secret_key_and_gateway(secret_key: str | None = None, gateway: str = '')

#### tool_desc() → List[str]

#### tool_eval(\*\*kwargs)

#### tool_name() → List[str]

### *class* appbuilder.core.component.ComponentArguments(\*, name: str = '', tool_desc: Dict[str, Any] = {})

基类：`BaseModel`

“ComponentArguments define Component meta fields

#### extract_values_to_dict()

extract ComponentArguments fields to dict

#### model_computed_fields *: ClassVar[dict[str, ComputedFieldInfo]]* *= {}*

A dictionary of computed field names and their corresponding ComputedFieldInfo objects.

#### model_config *: ClassVar[ConfigDict]* *= {}*

Configuration for the model, should be a dictionary conforming to [ConfigDict][pydantic.config.ConfigDict].

#### model_fields *: ClassVar[dict[str, FieldInfo]]* *= {'name': FieldInfo(annotation=str, required=False, default=''), 'tool_desc': FieldInfo(annotation=Dict[str, Any], required=False, default={})}*

Metadata about the fields defined on the model,
mapping of field names to [FieldInfo][pydantic.fields.FieldInfo].

This replaces Model._\_fields_\_ from Pydantic V1.

#### name *: str*

#### tool_desc *: Dict[str, Any]*

## appbuilder.core.constants module

## appbuilder.core.context module

### *class* appbuilder.core.context.SessionContext(id: str, session_id: str, request_id: str, user_id: str | None = None)

基类：`object`

维护当前 Session 的上下文信息。

#### id *: str*

#### request_id *: str*

#### session_id *: str*

#### session_vars_dict *: dict*

#### user_id *: str | None*

### appbuilder.core.context.get_context() → [SessionContext](#appbuilder.core.context.SessionContext)

获取当前 Session 的上下文信息。

### appbuilder.core.context.init_context(session_id: str, request_id: str, user_id: str | None = None) → [SessionContext](#appbuilder.core.context.SessionContext)

初始化 Session 的上下文信息。

## appbuilder.core.functional module

## appbuilder.core.message module

### *class* appbuilder.core.message.Message(content: \_T | None = None, \*, name: str | None = 'msg', mtype: str | None = 'dict', id: str | None = '2149283c-8a8f-4199-be5f-e15952691f4b', \*\*data)

基类：`BaseModel`, `Generic`[`_T`]

#### content *: \_T | None*

#### id *: str | None*

#### model_computed_fields *: ClassVar[dict[str, ComputedFieldInfo]]* *= {}*

A dictionary of computed field names and their corresponding ComputedFieldInfo objects.

#### model_config *: ClassVar[ConfigDict]* *= {'extra': 'allow'}*

Configuration for the model, should be a dictionary conforming to [ConfigDict][pydantic.config.ConfigDict].

#### model_fields *: ClassVar[dict[str, FieldInfo]]* *= {'content': FieldInfo(annotation=Union[~_T, NoneType], required=False, default={}), 'id': FieldInfo(annotation=Union[str, NoneType], required=False, default='2149283c-8a8f-4199-be5f-e15952691f4b'), 'mtype': FieldInfo(annotation=Union[str, NoneType], required=False, default='dict'), 'name': FieldInfo(annotation=Union[str, NoneType], required=False, default='msg')}*

Metadata about the fields defined on the model,
mapping of field names to [FieldInfo][pydantic.fields.FieldInfo].

This replaces Model._\_fields_\_ from Pydantic V1.

#### mtype *: str | None*

#### name *: str | None*

## appbuilder.core.session_message module

### *class* appbuilder.core.session_message.SessionMessage(\*\*kwargs)

基类：`Base`

会话 Message 数据模型，用于在数据库中存储和管理会话消息。

以下是每个字段的注释：
\_\_tablename_\_：数据库表名为 appbuilder_session_messages，这是该类对应的数据库表名。
id：主键字段，使用UUID作为默认值，确保每条记录的唯一性。
session_id：会话ID字段，不允许为空，用于标识会话。
request_id：请求ID字段，不允许为空，用于标识请求。
message_key：Message 键字段，不允许为空，用于标识 Message 的关键字。
message_value：Message 值字段，不允许为空，用于存储 Message 的具体内容，使用JSON格式存储。
created_at：创建时间字段，使用当前时间作为默认值，不允许为空。
updated_at：更新时间字段，使用当前时间作为默认值，不允许为空。
deleted：删除标记字段，使用False作为默认值，不允许为空。当该字段为True时，表示该条记录已被删除。

#### *class* Boolean(create_constraint: bool = False, name: str | None = None, \_create_events: bool = True, \_adapted_from: SchemaType | None = None)

基类：`SchemaType`, `Emulated`, `TypeEngine`

A bool datatype.

[`Boolean`](#appbuilder.core.session_message.SessionMessage.Boolean) typically uses BOOLEAN or SMALLINT on the DDL side,
and on the Python side deals in `True` or `False`.

The [`Boolean`](#appbuilder.core.session_message.SessionMessage.Boolean) datatype currently has two levels of assertion
that the values persisted are simple true/false values.  For all
backends, only the Python values `None`, `True`, `False`, `1`
or `0` are accepted as parameter values.   For those backends that
don’t support a “native boolean” datatype, an option exists to
also create a CHECK constraint on the target column

#### Versionchanged
在 1.2 版本发生变更: the [`Boolean`](#appbuilder.core.session_message.SessionMessage.Boolean) datatype now asserts that
incoming Python values are already in pure boolean form.

#### bind_processor(dialect)

Return a conversion function for processing bind values.

Returns a callable which will receive a bind parameter value
as the sole positional argument and will return a value to
send to the DB-API.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.bind_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.bind_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_bind_param()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  **dialect** – Dialect instance in use.

#### copy(\*\*kw)

#### literal_processor(dialect)

Return a conversion function for processing literal values that are
to be rendered directly without using binds.

This function is used when the compiler makes use of the
“literal_binds” flag, typically used in DDL generation as well
as in certain scenarios where backends don’t accept bound parameters.

Returns a callable which will receive a literal Python value
as the sole positional argument and will return a string representation
to be rendered in a SQL statement.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.literal_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.literal_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_literal_param()`.

#### SEE ALSO
types_typedecorator

#### native *: bool* *= True*

#### *property* python_type

Return the Python type object expected to be returned
by instances of this type, if known.

Basically, for those types which enforce a return type,
or are known across the board to do such for all common
DBAPIs (like `int` for example), will return that type.

If a return type is not defined, raises
`NotImplementedError`.

Note that any type also accommodates NULL in SQL which
means you can also get back `None` from any type
in practice.

#### result_processor(dialect, coltype)

Return a conversion function for processing result row values.

Returns a callable which will receive a result row column
value as the sole positional argument and will return a value
to return to the user.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.result_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.result_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_result_value()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  * **dialect** – Dialect instance in use.
  * **coltype** – DBAPI coltype argument received in cursor.description.

#### *class* Column(\_Column_\_name_pos: str | \_TypeEngineArgument[\_T] | SchemaEventTarget | None = None, \_Column_\_type_pos: \_TypeEngineArgument[\_T] | SchemaEventTarget | None = None, \*args: SchemaEventTarget, name: str | None = None, type_: \_TypeEngineArgument[\_T] | None = None, autoincrement: \_AutoIncrementType = 'auto', default: Any | None = \_NoArg.NO_ARG, insert_default: Any | None = \_NoArg.NO_ARG, doc: str | None = None, key: str | None = None, index: bool | None = None, unique: bool | None = None, info: \_InfoType | None = None, nullable: bool | Literal[SchemaConst.NULL_UNSPECIFIED] | None = SchemaConst.NULL_UNSPECIFIED, onupdate: Any | None = None, primary_key: bool = False, server_default: \_ServerDefaultArgument | None = None, server_onupdate: \_ServerOnUpdateArgument | None = None, quote: bool | None = None, system: bool = False, comment: str | None = None, insert_sentinel: bool = False, \_omit_from_statements: bool = False, \_proxies: Any | None = None, \*\*dialect_kwargs: Any)

基类：`DialectKWArgs`, `SchemaItem`, `ColumnClause`[`_T`]

Represents a column in a database table.

#### append_foreign_key(fk: ForeignKey) → None

#### computed *: Computed | None*

#### constraints *: Set[Constraint]*

#### copy(\*\*kw: Any) → [Column](#appbuilder.core.session_message.SessionMessage.Column)[Any]

#### Deprecated
自 1.4 版本弃用: The `_schema.Column.copy()` method is deprecated and will be removed in a future release.

#### identity *: Identity | None*

#### index *: bool | None*

The value of the 

```
:paramref:`_schema.Column.index`
```

 parameter.

Does not indicate if this `_schema.Column` is actually indexed
or not; use `_schema.Table.indexes`.

#### SEE ALSO
`_schema.Table.indexes`

#### inherit_cache *: bool | None* *= True*

Indicate if this `HasCacheKey` instance should make use of the
cache key generation scheme used by its immediate superclass.

The attribute defaults to `None`, which indicates that a construct has
not yet taken into account whether or not its appropriate for it to
participate in caching; this is functionally equivalent to setting the
value to `False`, except that a warning is also emitted.

This flag can be set to `True` on a particular class, if the SQL that
corresponds to the object does not change based on attributes which
are local to this class, and not its superclass.

#### SEE ALSO
compilerext_caching - General guideslines for setting the
`HasCacheKey.inherit_cache` attribute for third-party or user
defined SQL constructs.

#### references(column: [Column](#appbuilder.core.session_message.SessionMessage.Column)[Any]) → bool

Return True if this Column references the given column via foreign
key.

#### unique *: bool | None*

The value of the 

```
:paramref:`_schema.Column.unique`
```

 parameter.

Does not indicate if this `_schema.Column` is actually subject to
a unique constraint or not; use `_schema.Table.indexes` and
`_schema.Table.constraints`.

#### SEE ALSO
`_schema.Table.indexes`

`_schema.Table.constraints`.

#### *class* DateTime(timezone: bool = False)

基类：`_RenderISO8601NoT`, `HasExpressionLookup`, `TypeEngine`

A type for `datetime.datetime()` objects.

Date and time types return objects from the Python `datetime`
module.  Most DBAPIs have built in support for the datetime
module, with the noted exception of SQLite.  In the case of
SQLite, date and time types are stored as strings which are then
converted back to datetime objects when rows are returned.

For the time representation within the datetime type, some
backends include additional options, such as timezone support and
fractional seconds support.  For fractional seconds, use the
dialect-specific datatype, such as `mysql.TIME`.  For
timezone support, use at least the `_types.TIMESTAMP` datatype,
if not the dialect-specific datatype object.

#### get_dbapi_type(dbapi)

Return the corresponding type object from the underlying DB-API, if
any.

This can be useful for calling `setinputsizes()`, for example.

#### literal_processor(dialect)

Return a conversion function for processing literal values that are
to be rendered directly without using binds.

This function is used when the compiler makes use of the
“literal_binds” flag, typically used in DDL generation as well
as in certain scenarios where backends don’t accept bound parameters.

Returns a callable which will receive a literal Python value
as the sole positional argument and will return a string representation
to be rendered in a SQL statement.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.literal_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.literal_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_literal_param()`.

#### SEE ALSO
types_typedecorator

#### *property* python_type

Return the Python type object expected to be returned
by instances of this type, if known.

Basically, for those types which enforce a return type,
or are known across the board to do such for all common
DBAPIs (like `int` for example), will return that type.

If a return type is not defined, raises
`NotImplementedError`.

Note that any type also accommodates NULL in SQL which
means you can also get back `None` from any type
in practice.

#### *class* Integer

基类：`HasExpressionLookup`, `TypeEngine`

A type for `int` integers.

#### get_dbapi_type(dbapi)

Return the corresponding type object from the underlying DB-API, if
any.

This can be useful for calling `setinputsizes()`, for example.

#### literal_processor(dialect)

Return a conversion function for processing literal values that are
to be rendered directly without using binds.

This function is used when the compiler makes use of the
“literal_binds” flag, typically used in DDL generation as well
as in certain scenarios where backends don’t accept bound parameters.

Returns a callable which will receive a literal Python value
as the sole positional argument and will return a string representation
to be rendered in a SQL statement.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.literal_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.literal_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_literal_param()`.

#### SEE ALSO
types_typedecorator

#### *property* python_type

Return the Python type object expected to be returned
by instances of this type, if known.

Basically, for those types which enforce a return type,
or are known across the board to do such for all common
DBAPIs (like `int` for example), will return that type.

If a return type is not defined, raises
`NotImplementedError`.

Note that any type also accommodates NULL in SQL which
means you can also get back `None` from any type
in practice.

#### *class* JSON(none_as_null: bool = False)

基类：`Indexable`, `TypeEngine`

Represent a SQL JSON type.

#### NOTE
`_types.JSON`
is provided as a facade for vendor-specific
JSON types.  Since it supports JSON SQL operations, it only
works on backends that have an actual JSON type, currently:

* PostgreSQL - see `sqlalchemy.dialects.postgresql.JSON` and
  `sqlalchemy.dialects.postgresql.JSONB` for backend-specific
  notes
* MySQL - see
  `sqlalchemy.dialects.mysql.JSON` for backend-specific notes
* SQLite as of version 3.9 - see
  `sqlalchemy.dialects.sqlite.JSON` for backend-specific notes
* Microsoft SQL Server 2016 and later - see
  `sqlalchemy.dialects.mssql.JSON` for backend-specific notes

`_types.JSON` is part of the Core in support of the growing
popularity of native JSON datatypes.

The `_types.JSON` type stores arbitrary JSON format data, e.g.:

```default
data_table = Table('data_table', metadata,
    Column('id', Integer, primary_key=True),
    Column('data', JSON)
)

with engine.connect() as conn:
    conn.execute(
        data_table.insert(),
        {"data": {"key1": "value1", "key2": "value2"}}
    )
```

**JSON-Specific Expression Operators**

The `_types.JSON`
datatype provides these additional SQL operations:

* Keyed index operations:
  ```default
  data_table.c.data['some key']
  ```
* Integer index operations:
  ```default
  data_table.c.data[3]
  ```
* Path index operations:
  ```default
  data_table.c.data[('key_1', 'key_2', 5, ..., 'key_n')]
  ```
* Data casters for specific JSON element types, subsequent to an index
  or path operation being invoked:
  ```default
  data_table.c.data["some key"].as_integer()
  ```

  #### Versionadded
  Added in version 1.3.11.

Additional operations may be available from the dialect-specific versions
of `_types.JSON`, such as
`sqlalchemy.dialects.postgresql.JSON` and
`sqlalchemy.dialects.postgresql.JSONB` which both offer additional
PostgreSQL-specific operations.

**Casting JSON Elements to Other Types**

Index operations, i.e. those invoked by calling upon the expression using
the Python bracket operator as in `some_column['some key']`, return an
expression object whose type defaults to `_types.JSON` by default,
so that
further JSON-oriented instructions may be called upon the result type.
However, it is likely more common that an index operation is expected
to return a specific scalar element, such as a string or integer.  In
order to provide access to these elements in a backend-agnostic way,
a series of data casters are provided:

* [`JSON.Comparator.as_string()`](#appbuilder.core.session_message.SessionMessage.JSON.Comparator.as_string) - return the element as a string
* [`JSON.Comparator.as_boolean()`](#appbuilder.core.session_message.SessionMessage.JSON.Comparator.as_boolean) - return the element as a boolean
* [`JSON.Comparator.as_float()`](#appbuilder.core.session_message.SessionMessage.JSON.Comparator.as_float) - return the element as a float
* [`JSON.Comparator.as_integer()`](#appbuilder.core.session_message.SessionMessage.JSON.Comparator.as_integer) - return the element as an integer

These data casters are implemented by supporting dialects in order to
assure that comparisons to the above types will work as expected, such as:

```default
# integer comparison
data_table.c.data["some_integer_key"].as_integer() == 5

# boolean comparison
data_table.c.data["some_boolean"].as_boolean() == True
```

#### Versionadded
Added in version 1.3.11: Added type-specific casters for the basic JSON
data element types.

#### NOTE
The data caster functions are new in version 1.3.11, and supersede
the previous documented approaches of using CAST; for reference,
this looked like:

```default
from sqlalchemy import cast, type_coerce
from sqlalchemy import String, JSON
cast(
    data_table.c.data['some_key'], String
) == type_coerce(55, JSON)
```

The above case now works directly as:

```default
data_table.c.data['some_key'].as_integer() == 5
```

For details on the previous comparison approach within the 1.3.x
series, see the documentation for SQLAlchemy 1.2 or the included HTML
files in the doc/ directory of the version’s distribution.

**Detecting Changes in JSON columns when using the ORM**

The `_types.JSON` type, when used with the SQLAlchemy ORM, does not
detect in-place mutations to the structure.  In order to detect these, the
`sqlalchemy.ext.mutable` extension must be used, most typically
using the `MutableDict` class.  This extension will
allow “in-place” changes to the datastructure to produce events which
will be detected by the unit of work.  See the example at `HSTORE`
for a simple example involving a dictionary.

Alternatively, assigning a JSON structure to an ORM element that
replaces the old one will always trigger a change event.

**Support for JSON null vs. SQL NULL**

When working with NULL values, the `_types.JSON` type recommends the
use of two specific constants in order to differentiate between a column
that evaluates to SQL NULL, e.g. no value, vs. the JSON-encoded string of
`"null"`. To insert or select against a value that is SQL NULL, use the
constant `null()`. This symbol may be passed as a parameter value
specifically when using the `_types.JSON` datatype, which contains
special logic that interprets this symbol to mean that the column value
should be SQL NULL as opposed to JSON `"null"`:

```default
from sqlalchemy import null
conn.execute(table.insert(), {"json_value": null()})
```

To insert or select against a value that is JSON `"null"`, use the
constant `_types.JSON.NULL`:

```default
conn.execute(table.insert(), {"json_value": JSON.NULL})
```

The `_types.JSON` type supports a flag

```
:paramref:`_types.JSON.none_as_null`
```

 which when set to True will result
in the Python constant `None` evaluating to the value of SQL
NULL, and when set to False results in the Python constant
`None` evaluating to the value of JSON `"null"`.    The Python
value `None` may be used in conjunction with either
`_types.JSON.NULL` and `null()` in order to indicate NULL
values, but care must be taken as to the value of the

```
:paramref:`_types.JSON.none_as_null`
```

 in these cases.

**Customizing the JSON Serializer**

The JSON serializer and deserializer used by `_types.JSON`
defaults to
Python’s `json.dumps` and `json.loads` functions; in the case of the
psycopg2 dialect, psycopg2 may be using its own custom loader function.

In order to affect the serializer / deserializer, they are currently
configurable at the `_sa.create_engine()` level via the

```
:paramref:`_sa.create_engine.json_serializer`
```

 and

```
:paramref:`_sa.create_engine.json_deserializer`
```

 parameters.  For example,
to turn off `ensure_ascii`:

```default
engine = create_engine(
    "sqlite://",
    json_serializer=lambda obj: json.dumps(obj, ensure_ascii=False))
```

#### Versionchanged
在 1.3.7 版本发生变更: SQLite dialect’s `json_serializer` and `json_deserializer`
parameters renamed from `_json_serializer` and
`_json_deserializer`.

#### SEE ALSO
`sqlalchemy.dialects.postgresql.JSON`

`sqlalchemy.dialects.postgresql.JSONB`

`sqlalchemy.dialects.mysql.JSON`

`sqlalchemy.dialects.sqlite.JSON`

#### *class* Comparator(expr: ColumnElement[\_CT])

基类：`Comparator`[`_T`], `Comparator`[`_T`]

Define comparison operations for `_types.JSON`.

#### as_boolean()

Consider an indexed value as boolean.

This is similar to using `_sql.type_coerce`, and will
usually not apply a `CAST()`.

e.g.:

```default
stmt = select(
    mytable.c.json_column['some_data'].as_boolean()
).where(
    mytable.c.json_column['some_data'].as_boolean() == True
)
```

#### Versionadded
Added in version 1.3.11.

#### as_float()

Consider an indexed value as float.

This is similar to using `_sql.type_coerce`, and will
usually not apply a `CAST()`.

e.g.:

```default
stmt = select(
    mytable.c.json_column['some_data'].as_float()
).where(
    mytable.c.json_column['some_data'].as_float() == 29.75
)
```

#### Versionadded
Added in version 1.3.11.

#### as_integer()

Consider an indexed value as integer.

This is similar to using `_sql.type_coerce`, and will
usually not apply a `CAST()`.

e.g.:

```default
stmt = select(
    mytable.c.json_column['some_data'].as_integer()
).where(
    mytable.c.json_column['some_data'].as_integer() == 5
)
```

#### Versionadded
Added in version 1.3.11.

#### as_json()

Consider an indexed value as JSON.

This is similar to using `_sql.type_coerce`, and will
usually not apply a `CAST()`.

e.g.:

```default
stmt = select(mytable.c.json_column['some_data'].as_json())
```

This is typically the default behavior of indexed elements in any
case.

Note that comparison of full JSON structures may not be
supported by all backends.

#### Versionadded
Added in version 1.3.11.

#### as_numeric(precision, scale, asdecimal=True)

Consider an indexed value as numeric/decimal.

This is similar to using `_sql.type_coerce`, and will
usually not apply a `CAST()`.

e.g.:

```default
stmt = select(
    mytable.c.json_column['some_data'].as_numeric(10, 6)
).where(
    mytable.c.
    json_column['some_data'].as_numeric(10, 6) == 29.75
)
```

#### Versionadded
Added in version 1.4.0b2.

#### as_string()

Consider an indexed value as string.

This is similar to using `_sql.type_coerce`, and will
usually not apply a `CAST()`.

e.g.:

```default
stmt = select(
    mytable.c.json_column['some_data'].as_string()
).where(
    mytable.c.json_column['some_data'].as_string() ==
    'some string'
)
```

#### Versionadded
Added in version 1.3.11.

#### *class* JSONElementType

基类：`TypeEngine`

Common function for index / path elements in a JSON expression.

#### bind_processor(dialect)

Return a conversion function for processing bind values.

Returns a callable which will receive a bind parameter value
as the sole positional argument and will return a value to
send to the DB-API.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.bind_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.bind_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_bind_param()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  **dialect** – Dialect instance in use.

#### literal_processor(dialect)

Return a conversion function for processing literal values that are
to be rendered directly without using binds.

This function is used when the compiler makes use of the
“literal_binds” flag, typically used in DDL generation as well
as in certain scenarios where backends don’t accept bound parameters.

Returns a callable which will receive a literal Python value
as the sole positional argument and will return a string representation
to be rendered in a SQL statement.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.literal_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.literal_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_literal_param()`.

#### SEE ALSO
types_typedecorator

#### string_bind_processor(dialect)

#### string_literal_processor(dialect)

#### *class* JSONIndexType

基类：[`JSONElementType`](#appbuilder.core.session_message.SessionMessage.JSON.JSONElementType)

Placeholder for the datatype of a JSON index value.

This allows execution-time processing of JSON index values
for special syntaxes.

#### *class* JSONIntIndexType

基类：[`JSONIndexType`](#appbuilder.core.session_message.SessionMessage.JSON.JSONIndexType)

Placeholder for the datatype of a JSON index value.

This allows execution-time processing of JSON index values
for special syntaxes.

#### *class* JSONPathType

基类：[`JSONElementType`](#appbuilder.core.session_message.SessionMessage.JSON.JSONElementType)

Placeholder type for JSON path operations.

This allows execution-time processing of a path-based
index value into a specific SQL syntax.

#### *class* JSONStrIndexType

基类：[`JSONIndexType`](#appbuilder.core.session_message.SessionMessage.JSON.JSONIndexType)

Placeholder for the datatype of a JSON index value.

This allows execution-time processing of JSON index values
for special syntaxes.

#### NULL *= symbol('JSON_NULL')*

Describe the json value of NULL.

This value is used to force the JSON value of `"null"` to be
used as the value.   A value of Python `None` will be recognized
either as SQL NULL or JSON `"null"`, based on the setting
of the 

```
:paramref:`_types.JSON.none_as_null`
```

 flag; the
`_types.JSON.NULL`
constant can be used to always resolve to JSON `"null"` regardless
of this setting.  This is in contrast to the `_expression.null()`
construct,
which always resolves to SQL NULL.  E.g.:

```default
from sqlalchemy import null
from sqlalchemy.dialects.postgresql import JSON

# will *always* insert SQL NULL
obj1 = MyObject(json_value=null())

# will *always* insert JSON string "null"
obj2 = MyObject(json_value=JSON.NULL)

session.add_all([obj1, obj2])
session.commit()
```

In order to set JSON NULL as a default value for a column, the most
transparent method is to use `_expression.text()`:

```default
Table(
    'my_table', metadata,
    Column('json_data', JSON, default=text("'null'"))
)
```

While it is possible to use `_types.JSON.NULL` in this context, the
`_types.JSON.NULL` value will be returned as the value of the
column,
which in the context of the ORM or other repurposing of the default
value, may not be desirable.  Using a SQL expression means the value
will be re-fetched from the database within the context of retrieving
generated defaults.

#### bind_processor(dialect)

Return a conversion function for processing bind values.

Returns a callable which will receive a bind parameter value
as the sole positional argument and will return a value to
send to the DB-API.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.bind_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.bind_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_bind_param()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  **dialect** – Dialect instance in use.

#### comparator_factory

[`Comparator`](#appbuilder.core.session_message.SessionMessage.JSON.Comparator) 的别名

#### hashable *= False*

Flag, if False, means values from this type aren’t hashable.

Used by the ORM when uniquing result lists.

#### *property* python_type

Return the Python type object expected to be returned
by instances of this type, if known.

Basically, for those types which enforce a return type,
or are known across the board to do such for all common
DBAPIs (like `int` for example), will return that type.

If a return type is not defined, raises
`NotImplementedError`.

Note that any type also accommodates NULL in SQL which
means you can also get back `None` from any type
in practice.

#### result_processor(dialect, coltype)

Return a conversion function for processing result row values.

Returns a callable which will receive a result row column
value as the sole positional argument and will return a value
to return to the user.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.result_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.result_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_result_value()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  * **dialect** – Dialect instance in use.
  * **coltype** – DBAPI coltype argument received in cursor.description.

#### *property* should_evaluate_none

Alias of `_types.JSON.none_as_null`

#### *class* String(length: int | None = None, collation: str | None = None)

基类：`Concatenable`, `TypeEngine`

The base for all string and character types.

In SQL, corresponds to VARCHAR.

The length field is usually required when the String type is
used within a CREATE TABLE statement, as VARCHAR requires a length
on most databases.

#### bind_processor(dialect)

Return a conversion function for processing bind values.

Returns a callable which will receive a bind parameter value
as the sole positional argument and will return a value to
send to the DB-API.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.bind_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.bind_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_bind_param()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  **dialect** – Dialect instance in use.

#### get_dbapi_type(dbapi)

Return the corresponding type object from the underlying DB-API, if
any.

This can be useful for calling `setinputsizes()`, for example.

#### literal_processor(dialect)

Return a conversion function for processing literal values that are
to be rendered directly without using binds.

This function is used when the compiler makes use of the
“literal_binds” flag, typically used in DDL generation as well
as in certain scenarios where backends don’t accept bound parameters.

Returns a callable which will receive a literal Python value
as the sole positional argument and will return a string representation
to be rendered in a SQL statement.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.literal_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.literal_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_literal_param()`.

#### SEE ALSO
types_typedecorator

#### *property* python_type

Return the Python type object expected to be returned
by instances of this type, if known.

Basically, for those types which enforce a return type,
or are known across the board to do such for all common
DBAPIs (like `int` for example), will return that type.

If a return type is not defined, raises
`NotImplementedError`.

Note that any type also accommodates NULL in SQL which
means you can also get back `None` from any type
in practice.

#### result_processor(dialect, coltype)

Return a conversion function for processing result row values.

Returns a callable which will receive a result row column
value as the sole positional argument and will return a value
to return to the user.

If processing is not necessary, the method should return `None`.

#### NOTE
This method is only called relative to a **dialect specific type
object**, which is often **private to a dialect in use** and is not
the same type object as the public facing one, which means it’s not
feasible to subclass a `types.TypeEngine` class in order to
provide an alternate `_types.TypeEngine.result_processor()`
method, unless subclassing the `_types.UserDefinedType`
class explicitly.

To provide alternate behavior for
`_types.TypeEngine.result_processor()`, implement a
`_types.TypeDecorator` class and provide an implementation
of `_types.TypeDecorator.process_result_value()`.

#### SEE ALSO
types_typedecorator

* **参数:**
  * **dialect** – Dialect instance in use.
  * **coltype** – DBAPI coltype argument received in cursor.description.

#### create_engine(\*\*kwargs: Any) → Engine

Create a new `_engine.Engine` instance.

The standard calling form is to send the URL as the
first positional argument, usually a string
that indicates database dialect and connection arguments:

```default
engine = create_engine("postgresql+psycopg2://scott:tiger@localhost/test")
```

#### NOTE
Please review database_urls for general guidelines in composing
URL strings.  In particular, special characters, such as those often
part of passwords, must be URL encoded to be properly parsed.

Additional keyword arguments may then follow it which
establish various options on the resulting `_engine.Engine`
and its underlying `Dialect` and `_pool.Pool`
constructs:

```default
engine = create_engine("mysql+mysqldb://scott:tiger@hostname/dbname",
                            pool_recycle=3600, echo=True)
```

The string form of the URL is
`dialect[+driver]://user:password@host/dbname[?key=value..]`, where
`dialect` is a database name such as `mysql`, `oracle`,
`postgresql`, etc., and `driver` the name of a DBAPI, such as
`psycopg2`, `pyodbc`, `cx_oracle`, etc.  Alternatively,
the URL can be an instance of `URL`.

`**kwargs` takes a wide variety of options which are routed
towards their appropriate components.  Arguments may be specific to
the `_engine.Engine`, the underlying `Dialect`,
as well as the
`_pool.Pool`.  Specific dialects also accept keyword arguments that
are unique to that dialect.   Here, we describe the parameters
that are common to most `_sa.create_engine()` usage.

Once established, the newly resulting `_engine.Engine` will
request a connection from the underlying `_pool.Pool` once
`_engine.Engine.connect()` is called, or a method which depends on it
such as `_engine.Engine.execute()` is invoked.   The
`_pool.Pool` in turn
will establish the first actual DBAPI connection when this request
is received.   The `_sa.create_engine()` call itself does **not**
establish any actual DBAPI connections directly.

#### SEE ALSO
/core/engines

/dialects/index

connections_toplevel

* **参数:**
  * **connect_args** – a dictionary of options which will be
    passed directly to the DBAPI’s `connect()` method as
    additional keyword arguments.  See the example
    at custom_dbapi_args.
  * **creator** – 

    a callable which returns a DBAPI connection.
    This creation function will be passed to the underlying
    connection pool and will be used to create all new database
    connections. Usage of this function causes connection
    parameters specified in the URL argument to be bypassed.

    This hook is not as flexible as the newer
    `_events.DialectEvents.do_connect()` hook which allows complete
    control over how a connection is made to the database, given the full
    set of URL arguments and state beforehand.

    #### SEE ALSO
    `_events.DialectEvents.do_connect()` - event hook that allows
    full control over DBAPI connection mechanics.

    custom_dbapi_args
  * **echo=False** – 

    if True, the Engine will log all statements
    as well as a `repr()` of their parameter lists to the default log
    handler, which defaults to `sys.stdout` for output.   If set to the
    string `"debug"`, result rows will be printed to the standard output
    as well. The `echo` attribute of `Engine` can be modified at any
    time to turn logging on and off; direct control of logging is also
    available using the standard Python `logging` module.

    #### SEE ALSO
    dbengine_logging - further detail on how to configure
    logging.
  * **echo_pool=False** – 

    if True, the connection pool will log
    informational output such as when connections are invalidated
    as well as when connections are recycled to the default log handler,
    which defaults to `sys.stdout` for output.   If set to the string
    `"debug"`, the logging will include pool checkouts and checkins.
    Direct control of logging is also available using the standard Python
    `logging` module.

    #### SEE ALSO
    dbengine_logging - further detail on how to configure
    logging.
  * **empty_in_strategy** – 

    No longer used; SQLAlchemy now uses
    “empty set” behavior for IN in all cases.

    #### Deprecated
    自 1.4 版本弃用: The 

    ```
    :paramref:`_sa.create_engine.empty_in_strategy`
    ```

     keyword is deprecated, and no longer has any effect.  All IN expressions are now rendered using the “expanding parameter” strategy which renders a set of boundexpressions, or an “empty set” SELECT, at statement executiontime.
  * **enable_from_linting** – 

    defaults to True.  Will emit a warning
    if a given SELECT statement is found to have un-linked FROM elements
    which would cause a cartesian product.

    #### Versionadded
    Added in version 1.4.

    #### SEE ALSO
    change_4737
  * **execution_options** – Dictionary execution options which will
    be applied to all connections.  See
    `execution_options()`
  * **future** – 

    Use the 2.0 style `_engine.Engine` and
    `_engine.Connection` API.

    As of SQLAlchemy 2.0, this parameter is present for backwards
    compatibility only and must remain at its default value of `True`.

    The 

    ```
    :paramref:`_sa.create_engine.future`
    ```

     parameter will be
    deprecated in a subsequent 2.x release and eventually removed.

    #### Versionadded
    Added in version 1.4.

    #### Versionchanged
    在 2.0 版本发生变更: All `_engine.Engine` objects are
    “future” style engines and there is no longer a `future=False`
    mode of operation.

    #### SEE ALSO
    migration_20_toplevel
  * **hide_parameters** – 

    Boolean, when set to True, SQL statement parameters
    will not be displayed in INFO logging nor will they be formatted into
    the string representation of `StatementError` objects.

    #### Versionadded
    Added in version 1.3.8.

    #### SEE ALSO
    dbengine_logging - further detail on how to configure
    logging.
  * **implicit_returning=True** – Legacy parameter that may only be set
    to True. In SQLAlchemy 2.0, this parameter does nothing. In order to
    disable “implicit returning” for statements invoked by the ORM,
    configure this on a per-table basis using the

    ```
    :paramref:`.Table.implicit_returning`
    ```

     parameter.
  * **insertmanyvalues_page_size** – 

    number of rows to format into an
    INSERT statement when the statement uses “insertmanyvalues” mode, which is
    a paged form of bulk insert that is used for many backends when using
    executemany execution typically in conjunction with RETURNING.
    Defaults to 1000, but may also be subject to dialect-specific limiting
    factors which may override this value on a per-statement basis.

    #### Versionadded
    Added in version 2.0.

    #### SEE ALSO
    engine_insertmanyvalues

    engine_insertmanyvalues_page_size

    ```
    :paramref:`_engine.Connection.execution_options.insertmanyvalues_page_size`
    ```
  * **isolation_level** – 

    optional string name of an isolation level
    which will be set on all new connections unconditionally.
    Isolation levels are typically some subset of the string names
    `"SERIALIZABLE"`, `"REPEATABLE READ"`,
    `"READ COMMITTED"`, `"READ UNCOMMITTED"` and `"AUTOCOMMIT"`
    based on backend.

    The 

    ```
    :paramref:`_sa.create_engine.isolation_level`
    ```

     parameter is
    in contrast to the

    ```
    :paramref:`.Connection.execution_options.isolation_level`
    ```


    execution option, which may be set on an individual
    `Connection`, as well as the same parameter passed to
    `Engine.execution_options()`, where it may be used to create
    multiple engines with different isolation levels that share a common
    connection pool and dialect.

    #### Versionchanged
    在 2.0 版本发生变更: The

    ```
    :paramref:`_sa.create_engine.isolation_level`
    ```


    parameter has been generalized to work on all dialects which support
    the concept of isolation level, and is provided as a more succinct,
    up front configuration switch in contrast to the execution option
    which is more of an ad-hoc programmatic option.

    #### SEE ALSO
    dbapi_autocommit
  * **json_deserializer** – 

    for dialects that support the
    `_types.JSON`
    datatype, this is a Python callable that will convert a JSON string
    to a Python object.  By default, the Python `json.loads` function is
    used.

    #### Versionchanged
    在 1.3.7 版本发生变更: The SQLite dialect renamed this from
    `_json_deserializer`.
  * **json_serializer** – 

    for dialects that support the `_types.JSON`
    datatype, this is a Python callable that will render a given object
    as JSON.   By default, the Python `json.dumps` function is used.

    #### Versionchanged
    在 1.3.7 版本发生变更: The SQLite dialect renamed this from
    `_json_serializer`.
  * **label_length=None** – 

    optional integer value which limits
    the size of dynamically generated column labels to that many
    characters. If less than 6, labels are generated as
    “_(counter)”. If `None`, the value of
    `dialect.max_identifier_length`, which may be affected via the

    ```
    :paramref:`_sa.create_engine.max_identifier_length`
    ```

     parameter,
    is used instead.   The value of

    ```
    :paramref:`_sa.create_engine.label_length`
    ```


    may not be larger than that of

    ```
    :paramref:`_sa.create_engine.max_identfier_length`
    ```

    .

    #### SEE ALSO
    ```
    :paramref:`_sa.create_engine.max_identifier_length`
    ```
  * **logging_name** – 

    String identifier which will be used within
    the “name” field of logging records generated within the
    “sqlalchemy.engine” logger. Defaults to a hexstring of the
    object’s id.

    #### SEE ALSO
    dbengine_logging - further detail on how to configure
    logging.

    ```
    :paramref:`_engine.Connection.execution_options.logging_token`
    ```
  * **max_identifier_length** – 

    integer; override the max_identifier_length
    determined by the dialect.  if `None` or zero, has no effect.  This
    is the database’s configured maximum number of characters that may be
    used in a SQL identifier such as a table name, column name, or label
    name. All dialects determine this value automatically, however in the
    case of a new database version for which this value has changed but
    SQLAlchemy’s dialect has not been adjusted, the value may be passed
    here.

    #### Versionadded
    Added in version 1.3.9.

    #### SEE ALSO
    ```
    :paramref:`_sa.create_engine.label_length`
    ```
  * **max_overflow=10** – the number of connections to allow in
    connection pool “overflow”, that is connections that can be
    opened above and beyond the pool_size setting, which defaults
    to five. this is only used with `QueuePool`.
  * **module=None** – reference to a Python module object (the module
    itself, not its string name).  Specifies an alternate DBAPI module to
    be used by the engine’s dialect.  Each sub-dialect references a
    specific DBAPI which will be imported before first connect.  This
    parameter causes the import to be bypassed, and the given module to
    be used instead. Can be used for testing of DBAPIs as well as to
    inject “mock” DBAPI implementations into the `_engine.Engine`.
  * **paramstyle=None** – The [paramstyle](https://legacy.python.org/dev/peps/pep-0249/#paramstyle)
    to use when rendering bound parameters.  This style defaults to the
    one recommended by the DBAPI itself, which is retrieved from the
    `.paramstyle` attribute of the DBAPI.  However, most DBAPIs accept
    more than one paramstyle, and in particular it may be desirable
    to change a “named” paramstyle into a “positional” one, or vice versa.
    When this attribute is passed, it should be one of the values
    `"qmark"`, `"numeric"`, `"named"`, `"format"` or
    `"pyformat"`, and should correspond to a parameter style known
    to be supported by the DBAPI in use.
  * **pool=None** – an already-constructed instance of
    `Pool`, such as a
    `QueuePool` instance. If non-None, this
    pool will be used directly as the underlying connection pool
    for the engine, bypassing whatever connection parameters are
    present in the URL argument. For information on constructing
    connection pools manually, see pooling_toplevel.
  * **poolclass=None** – a `Pool`
    subclass, which will be used to create a connection pool
    instance using the connection parameters given in the URL. Note
    this differs from `pool` in that you don’t actually
    instantiate the pool in this case, you just indicate what type
    of pool to be used.
  * **pool_logging_name** – 

    String identifier which will be used within
    the “name” field of logging records generated within the
    “sqlalchemy.pool” logger. Defaults to a hexstring of the object’s
    id.

    #### SEE ALSO
    dbengine_logging - further detail on how to configure
    logging.
  * **pool_pre_ping** – 

    boolean, if True will enable the connection pool
    “pre-ping” feature that tests connections for liveness upon
    each checkout.

    #### Versionadded
    Added in version 1.2.

    #### SEE ALSO
    pool_disconnects_pessimistic
  * **pool_size=5** – the number of connections to keep open
    inside the connection pool. This used with
    `QueuePool` as
    well as `SingletonThreadPool`.  With
    `QueuePool`, a `pool_size` setting
    of 0 indicates no limit; to disable pooling, set `poolclass` to
    `NullPool` instead.
  * **pool_recycle=-1** – 

    this setting causes the pool to recycle
    connections after the given number of seconds has passed. It
    defaults to -1, or no timeout. For example, setting to 3600
    means connections will be recycled after one hour. Note that
    MySQL in particular will disconnect automatically if no
    activity is detected on a connection for eight hours (although
    this is configurable with the MySQLDB connection itself and the
    server configuration as well).

    #### SEE ALSO
    pool_setting_recycle
  * **pool_reset_on_return='rollback'** – 

    set the

    ```
    :paramref:`_pool.Pool.reset_on_return`
    ```

     parameter of the underlying
    `_pool.Pool` object, which can be set to the values
    `"rollback"`, `"commit"`, or `None`.

    #### SEE ALSO
    pool_reset_on_return
  * **pool_timeout=30** – 

    number of seconds to wait before giving
    up on getting a connection from the pool. This is only used
    with `QueuePool`. This can be a float but is
    subject to the limitations of Python time functions which may not be
    reliable in the tens of milliseconds.
    <!-- note: don't use 30.0 above, it seems to break with the :param tag -->
  * **pool_use_lifo=False** – 

    use LIFO (last-in-first-out) when retrieving
    connections from `QueuePool` instead of FIFO
    (first-in-first-out). Using LIFO, a server-side timeout scheme can
    reduce the number of connections used during non- peak   periods of
    use.   When planning for server-side timeouts, ensure that a recycle or
    pre-ping strategy is in use to gracefully   handle stale connections.
    > #### Versionadded
    > Added in version 1.3.

    > #### SEE ALSO
    > pool_use_lifo

    > pool_disconnects
  * **plugins** – 

    string list of plugin names to load.  See
    `CreateEnginePlugin` for background.

    #### Versionadded
    Added in version 1.2.3.
  * **query_cache_size** – 

    size of the cache used to cache the SQL string
    form of queries.  Set to zero to disable caching.

    The cache is pruned of its least recently used items when its size reaches
    N \* 1.5.  Defaults to 500, meaning the cache will always store at least
    500 SQL statements when filled, and will grow up to 750 items at which
    point it is pruned back down to 500 by removing the 250 least recently
    used items.

    Caching is accomplished on a per-statement basis by generating a
    cache key that represents the statement’s structure, then generating
    string SQL for the current dialect only if that key is not present
    in the cache.   All statements support caching, however some features
    such as an INSERT with a large set of parameters will intentionally
    bypass the cache.   SQL logging will indicate statistics for each
    statement whether or not it were pull from the cache.

    #### NOTE
    some ORM functions related to unit-of-work persistence as well
    as some attribute loading strategies will make use of individual
    per-mapper caches outside of the main cache.

    #### SEE ALSO
    sql_caching

    #### Versionadded
    Added in version 1.4.
  * **use_insertmanyvalues** – 

    True by default, use the “insertmanyvalues”
    execution style for INSERT..RETURNING statements by default.

    #### Versionadded
    Added in version 2.0.

    #### SEE ALSO
    engine_insertmanyvalues

#### created_at

#### deleted

#### id

#### message_key

#### message_value

#### request_id

#### session_id

#### updated_at

### appbuilder.core.session_message.get_db_base_class()

## appbuilder.core.user_session module

### *class* appbuilder.core.user_session.UserSession(\*args, \*\*kwargs)

基类：`object`

会话数据管理工具，实例化后将是一个全局变量。
提供保存对话数据与获取历史数据的方法，

```
**
```

必须\*\*在 AgentRuntime 启动的服务中使用。

#### append(message_dict: Dict[str, [Message](#appbuilder.core.message.Message)]) → None

将 message_dict 中的变量保存到 session 中。
在非服务化版本中使用内存存储。在服务化版本中，将使用数据库进行存储。

* **参数:**
  **message_dict** (*Dict* *[**str* *,* [*Message*](#appbuilder.core.message.Message) *]*) – 包含 Message 的字典，其中键为字符串类型，值为 Message 类型。
* **返回:**
  None

#### get_history(key: str, limit: int = 10) → List[[Message](#appbuilder.core.message.Message)]

获取同个 session 中名为 key 的历史变量。
在非服务化版本中从内存获取。在服务化版本中，将从数据库获取。

* **参数:**
  * **key** (*str*) – 变量名
  * **limit** (*int*) – 最近 limit 条 Message 数据
* **返回:**
  List[Message]

### appbuilder.core.user_session.lazy_import_sqlalchemy()
